
- [磁盘](obsidian://open?vault=hersym&file=doc%2FQRS%2FDevice%2FMemory%2FDisk) 
	- HDD 减小磁盘延迟时间
	- SSD

盘片可以更换的称为可换盘磁盘
盘片不可更换的称为固定盘磁盘

1、磁盘初始化


Step1:进行低级格式化(物理格式化)，将盘的各个磁道划分为扇区。一个扇区通常可分为头、数据区域(如512B大小)、尾三个部分组成。管理扇区所需要的各种数据结构一般存放在头、尾两个部分，包括扇区校验码(如奇偶校验、CRC循环冗余校验码等，校验码用于校验扇区中的数据是否发生错误)
step2:将磁盘分区，每个分区由若干柱面组成(即分为我们熟悉的C盘、D盘、E盘)
Step3:进行逻辑格式化，创建文件系统。包括创建文件系统的根目录、初始化存储空间管理所用的数据结构(如位示图、空闲分区表)

2、引导块

3、坏块的管理

对于简单的磁盘，可以在逻辑格式化时(建立文件系统时)对整个磁盘进行坏块检查，标明哪些扇区是坏扇区比如:在FAT表上标明。(在这种方式中，坏块对操作系统不透明)

对于复杂的磁盘，磁盘控制器(磁盘设备内部的一个硬件部件)会维护一个坏块链表。

会保留一些“备用扇区”，用于替换坏块。这种方案称为扇区备用。上且这种处理方式中，坏块对操作系统透明


### 调度算法 [00-算法简介](../algo/00-算法简介.md) 

寻找时间(寻道时间)T:在读/写数据前，将磁头移动到指定磁道所花的时间。
①启动磁头臂是需要时间的。假设耗时为s;
②移动磁头也是需要时间的。假设磁头匀速移动，每跨越一个磁道耗时为m，总共需要跨越n条磁道。

延迟时间T_R:通过旋转磁盘，使磁头定位到目标扇区所需要的时间。设磁盘转速为r(单位:转/秒，或转/分)，则平均所需的延迟时间$T=(1/2)*(1/r)= \dfrac{1}{2r}$

传输时间T_t:从磁盘读出或向磁盘写入数据所经历的时间，假设磁盘转速为r，此次读/写的字节数为b，每个磁道上的字节数为N。则:传输时间$T=(1/r)*(b/N)= b/(rN)$

一次磁盘读/写操作需要的时间
- 寻找时间Ts=s+m*n
- 延迟时间Tr=1/(2r)
- 传输时间Tt=b/(rN)

#### 先来先服务（FCFS）


#### 最短寻找时间优先（SSTF）

- 贪心
- 平均寻道时间短
- 优先处理最近的磁道，可能会产生饥饿现象

#### 扫描算法（SCAN）与 LOOK

只有磁头移动到最外侧磁道的时候才能往内移动，移动到最内侧磁道的时候才能往外移动

基于SCAN，LOOK算法，如果在磁头移动方向上已经没有别的请求，就可以立即改变磁头移动方向

#### 循环扫描算法（C-SCAN）与 CLOOK

- 循环扫描算法（C-SCAN）
	- SCAN算法对于各个位置磁道的响应频率不平均，而C-SCAN 算法就是为了解决这个问题。规定只有磁头朝某个特定方向移动时才处理磁道访问请求，
	- 返回时直接快速移动至起始端(一般是0号磁道)而不处理任何请求。
	- 单向访问
- C-LOOK
	- C-SCAN 缺点:只有到达最边上的磁道时才能改变磁头移动方向
	- 如果在磁头移动方向上已经没有别的请求，就可以立即改变磁头移动方向，不必须MAX
	- 磁头只需要返回到有磁道访问请求的位置即可,不必须0

#### NStepScan和FSCAN

...





### MORE

- DiskCache
- RAID
- 数据一致性控制
- 容错 SFT-I & SFT-II











































